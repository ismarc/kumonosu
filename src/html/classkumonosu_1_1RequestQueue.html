<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>kumonosu::RequestQueue Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="namespacekumonosu.html">kumonosu</a>::<a class="el" href="classkumonosu_1_1RequestQueue.html">RequestQueue</a>
  </div>
</div>
<div class="contents">
<h1>kumonosu::RequestQueue Class Reference</h1><!-- doxytag: class="kumonosu::RequestQueue" -->Provides management of std::queue's for multiple destination services.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="RequestQueue_8h-source.html">RequestQueue.h</a>&gt;</code>
<p>

<p>
<a href="classkumonosu_1_1RequestQueue-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkumonosu_1_1RequestQueue.html#a9c18ac5654af41e64ded2d7001c24f5">RequestQueue</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes internal data objects.  <a href="#a9c18ac5654af41e64ded2d7001c24f5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkumonosu_1_1RequestQueue.html#97347b5c0dc3f32de53f66cf14fed922">addItem</a> (int32_t serviceId, queueItem *item)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Adds an item to the end of the queue for the service id.  <a href="#97347b5c0dc3f32de53f66cf14fed922"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">queueItem *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkumonosu_1_1RequestQueue.html#6a6c8f54e8f065c2cd43823aafb93e91">getItem</a> (int32_t serviceId)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retrieves the next item in the specified queue.  <a href="#6a6c8f54e8f065c2cd43823aafb93e91"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">std::queue&lt; queueItem * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkumonosu_1_1RequestQueue.html#067573ce3922601a0357794219de2bd2">getItemQueue</a> (int32_t serviceId)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retrieves the entire queue for the associated service id.  <a href="#067573ce3922601a0357794219de2bd2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">std::queue&lt; queueItem * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkumonosu_1_1RequestQueue.html#f36e9cdc0f7a31152c87e7a758944d3c">getItemQueue</a> (int32_t serviceId, int32_t count)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retrieves a queue with n items for the service id.  <a href="#f36e9cdc0f7a31152c87e7a758944d3c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">std::vector&lt; int32_t &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkumonosu_1_1RequestQueue.html#eb246e4d36bd6aa2d5a347665f4d77e9">getServiceIds</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retrieves the list of service ids with items in a queue.  <a href="#eb246e4d36bd6aa2d5a347665f4d77e9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkumonosu_1_1RequestQueue.html#b21a138305cb35a5cf0c977efbf2894c">queueLock</a> (pthread_mutex_t *mutex)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Assigns a mutex for use in notifications of new items in a queue.  <a href="#b21a138305cb35a5cf0c977efbf2894c"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Provides management of std::queue's for multiple destination services. 
<p>
<a class="el" href="classkumonosu_1_1RequestQueue.html" title="Provides management of std::queue&#39;s for multiple destination services.">RequestQueue</a> is designed to provide a queue of items destined for multiple consumers. It is an aggregation of queues for each service. It is not designed to replace std::queue, instead it is a container for multiple std::queue's. It is organized by service id and allows multiple methods of accessing the items in the queues. To ease use, the internal storage will not contain entries for empty queues. The system will dynamically add and remove entries based on adding and removing items. The idea is that a call to getServiceIds will retrieve a list of all service ids with items in a queue. The goal is to have no additional overhead on the caller, just add or get items and the right thing is done.<p>
<dl class="author" compact><dt><b>Author:</b></dt><dd>Matt Brace </dd></dl>

<p>Definition at line <a class="el" href="RequestQueue_8h-source.html#l00042">42</a> of file <a class="el" href="RequestQueue_8h-source.html">RequestQueue.h</a>.</p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="a9c18ac5654af41e64ded2d7001c24f5"></a><!-- doxytag: member="kumonosu::RequestQueue::RequestQueue" ref="a9c18ac5654af41e64ded2d7001c24f5" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">RequestQueue::RequestQueue           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initializes internal data objects. 
<p>
Constructor, initializes _dataStoreMutex 
<p>Definition at line <a class="el" href="RequestQueue_8cpp-source.html#l00007">7</a> of file <a class="el" href="RequestQueue_8cpp-source.html">RequestQueue.cpp</a>.</p>

</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="97347b5c0dc3f32de53f66cf14fed922"></a><!-- doxytag: member="kumonosu::RequestQueue::addItem" ref="97347b5c0dc3f32de53f66cf14fed922" args="(int32_t serviceId, queueItem *item)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RequestQueue::addItem           </td>
          <td>(</td>
          <td class="paramtype">int32_t&nbsp;</td>
          <td class="paramname"> <em>serviceId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">queueItem *&nbsp;</td>
          <td class="paramname"> <em>item</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Adds an item to the end of the queue for the service id. 
<p>
Adds an item to the queue associated with the supplied service id. If a queue did not originally exist, one is created. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>serviceId</em>&nbsp;</td><td>a 32 bit integer indicating the id of the associated service. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>item</em>&nbsp;</td><td>a pointer to a queueItem object to be added to the queue.</td></tr>
  </table>
</dl>
Adds an item to the end of the queue for the specified service id 
<p>Definition at line <a class="el" href="RequestQueue_8cpp-source.html#l00017">17</a> of file <a class="el" href="RequestQueue_8cpp-source.html">RequestQueue.cpp</a>.</p>

</div>
</div><p>
<a class="anchor" name="6a6c8f54e8f065c2cd43823aafb93e91"></a><!-- doxytag: member="kumonosu::RequestQueue::getItem" ref="6a6c8f54e8f065c2cd43823aafb93e91" args="(int32_t serviceId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">queueItem * RequestQueue::getItem           </td>
          <td>(</td>
          <td class="paramtype">int32_t&nbsp;</td>
          <td class="paramname"> <em>serviceId</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Retrieves the next item in the specified queue. 
<p>
Returns an appropriate queueItem or null if one does not exist. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>serviceId</em>&nbsp;</td><td>a 32 bit integer indicating the id of the service to retrieve the item from. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>the next queueItem in the queue or NULL</dd></dl>
Retrieves the next item in the specified queue 
<p>Definition at line <a class="el" href="RequestQueue_8cpp-source.html#l00045">45</a> of file <a class="el" href="RequestQueue_8cpp-source.html">RequestQueue.cpp</a>.</p>

</div>
</div><p>
<a class="anchor" name="067573ce3922601a0357794219de2bd2"></a><!-- doxytag: member="kumonosu::RequestQueue::getItemQueue" ref="067573ce3922601a0357794219de2bd2" args="(int32_t serviceId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::queue&lt; queueItem * &gt; RequestQueue::getItemQueue           </td>
          <td>(</td>
          <td class="paramtype">int32_t&nbsp;</td>
          <td class="paramname"> <em>serviceId</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Retrieves the entire queue for the associated service id. 
<p>
Retrieves the entire associated queue for the supplied service id or an empty queue if there are no items. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>serviceId</em>&nbsp;</td><td>a 32 bit integer indiciating the id of service to retrieve the queue for. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>a std::queue for the specified service id or an empty queue if there are no associated items.</dd></dl>
Retrieves the entire associated queue 
<p>Definition at line <a class="el" href="RequestQueue_8cpp-source.html#l00067">67</a> of file <a class="el" href="RequestQueue_8cpp-source.html">RequestQueue.cpp</a>.</p>

</div>
</div><p>
<a class="anchor" name="f36e9cdc0f7a31152c87e7a758944d3c"></a><!-- doxytag: member="kumonosu::RequestQueue::getItemQueue" ref="f36e9cdc0f7a31152c87e7a758944d3c" args="(int32_t serviceId, int32_t count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::queue&lt; queueItem * &gt; RequestQueue::getItemQueue           </td>
          <td>(</td>
          <td class="paramtype">int32_t&nbsp;</td>
          <td class="paramname"> <em>serviceId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&nbsp;</td>
          <td class="paramname"> <em>count</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Retrieves a queue with n items for the service id. 
<p>
Retrieves the queue for the specified service id, with a maximum number of items as specified by count. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>serviceId</em>&nbsp;</td><td>a 32 bit integer indicating the id of the service to retrieve the queue for. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>count</em>&nbsp;</td><td>a 32 bit integer indicating the maximum number of items to include in the return item. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>a std::queue for the specified service id with a maximum of count items, or an empty queue if there are no associated items.</dd></dl>
Retrieves the next count items in the queue 
<p>Definition at line <a class="el" href="RequestQueue_8cpp-source.html#l00090">90</a> of file <a class="el" href="RequestQueue_8cpp-source.html">RequestQueue.cpp</a>.</p>

</div>
</div><p>
<a class="anchor" name="eb246e4d36bd6aa2d5a347665f4d77e9"></a><!-- doxytag: member="kumonosu::RequestQueue::getServiceIds" ref="eb246e4d36bd6aa2d5a347665f4d77e9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; int32_t &gt; RequestQueue::getServiceIds           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Retrieves the list of service ids with items in a queue. 
<p>
Retrieves the list of service ids that have items in their queue, suitable for a global consumer to determine what needs to be requested. <dl class="return" compact><dt><b>Returns:</b></dt><dd>a std::vector of service ids.</dd></dl>
Retrieves the list of service ids that are used in the map 
<p>Definition at line <a class="el" href="RequestQueue_8cpp-source.html#l00122">122</a> of file <a class="el" href="RequestQueue_8cpp-source.html">RequestQueue.cpp</a>.</p>

</div>
</div><p>
<a class="anchor" name="b21a138305cb35a5cf0c977efbf2894c"></a><!-- doxytag: member="kumonosu::RequestQueue::queueLock" ref="b21a138305cb35a5cf0c977efbf2894c" args="(pthread_mutex_t *mutex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RequestQueue::queueLock           </td>
          <td>(</td>
          <td class="paramtype">pthread_mutex_t *&nbsp;</td>
          <td class="paramname"> <em>mutex</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Assigns a mutex for use in notifications of new items in a queue. 
<p>
The given mutex is locked when supplied. The mutex is unlocked when items are added to any queue. Suitable for providing blocking behavior waiting for items to be added to the queue. When the mutex is unlocked, it is removed from the list and must be added again when notification is needed. This allows external and containing objects time to process items before reestablishing notification. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mutex</em>&nbsp;</td><td>The mutex to be locked initially and unlocked for notification. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="RequestQueue_8cpp-source.html#l00142">142</a> of file <a class="el" href="RequestQueue_8cpp-source.html">RequestQueue.cpp</a>.</p>

</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="RequestQueue_8h-source.html">RequestQueue.h</a><li><a class="el" href="RequestQueue_8cpp-source.html">RequestQueue.cpp</a></ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri Aug 14 23:01:23 2009 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
